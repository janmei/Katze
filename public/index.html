<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Interactive Future 2018</title>

  <!-- p5 -->
  <script language="javascript" type="text/javascript" src="p5.js"></script>
  <script language="javascript" src="p5.dom.js"></script>
  <!-- 
  <script language="javascript" src="p5.sound.js"></script>
  -->
  <!--
  <script language="javascript" src="animation_wavy.js"></script>
  <script language="javascript" src="animation_timetable.js"></script>
  <script language="javascript" src="animation_main.js"></script>
  -->
  <script language="javascript" src="animation_polys.js"></script>
  <!-- css -->
  <title>Document</title>
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <!-- <h1 class="text">Hello World Public</h1> -->

  <h1 class="headline" id="outHead"></h1>
  <p class="text" id="outSub"></p>
  <script src="socket.io.js"></script>
  <script src="https://code.jquery.com/jquery-1.11.1.js"></script>
  <script>

    var time; 
    $(function () {
      var socket = io();
      socket.on('head text', function (msg) {
        $('#outHead').text(msg);
      });
      socket.on('sub text', function (msg) {
        $('#outSub').text(msg);
      });

      socket.on('func test', function (msg) {
        flyOut(20)
      });

      socket.on('countdown', function (msg) {
        clearTimeout(time);
        countdown(msg)
      })


      function countdown(minutes) {

          var seconds = 60;
          var mins = minutes
          
          function tick() {

            var current_minutes = mins - 1
            seconds--;

            $('#outHead').html(current_minutes.toString() + ":" + (seconds < 10 ? "0" : "") + String(seconds));
            if (seconds > 0) {
              time = setTimeout(tick, 1000);
            } else {
              if (mins > 1) {
                countdown(mins - 1);
              }
            }
          }
          tick();
        }
    });
  </script>
</body>

</html>